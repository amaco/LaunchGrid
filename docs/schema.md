# LaunchGrid: Data Schema Design

This document defines the core JSON structures that allow LaunchGrid to be modular and "LEGO-like".

## 1. The Blueprint (The Root)
The Blueprint is the top-level object generated by the AI for a specific product.

```json
{
  "id": "bp_123",
  "product_name": "Trading Journal App",
  "version": "2026.1",
  "context": {
    "target_audience": "Active traders, 25-45, crypto/forex",
    "pain_points": ["Manual logging", "Emotional trading", "High friction"],
    "budget_monthly": 2000
  },
  "active_pillars": [
    { "id": "pillar_twitter", "type": "social_organic" },
    { "id": "pillar_discord", "type": "community" }
  ],
  "workflows": [
    {
      "workflow_id": "wf_twitter_authority",
      "pillar_ref": "pillar_twitter",
      "goal": "authority_building"
    },
    {
      "workflow_id": "wf_discord_promo",
      "pillar_ref": "pillar_discord",
      "goal": "amplification"
    }
  ]
}
```

## 2. The Workflow
A Workflow is a sequence of steps designed for a specific goal on a specific medium.

```json
{
  "id": "wf_twitter_authority_builder",
  "name": "The Truth-Teller Sequence",
  "medium": "twitter",
  "phase_alignment": "Phase 1: Launch",
  "steps": [
    {
      "id": "step_id_1",
      "type": "SCAN_TRENDS",
      "config": {
        "hashtags": ["#TradingJournal", "#DayTrading"],
        "min_engagement": 50
      }
    },
    {
      "id": "step_id_2",
      "type": "GENERATE_DRAFT",
      "template": "truth_teller_thread",
      "depends_on": ["step_id_1"] 
    },
    {
      "id": "step_id_3",
      "type": "CROSS_POST",
      "platform": "discord",
      "action": "promote_link",
      "depends_on": ["workflow:wf_twitter_authority.step_id_2"] // Cross-Workflow Dependency
    }
  ]
}
```

## 3. The Step Library (The "LEGO Blocks")
Each step has a `type` that maps to a specific AI or UI behavior.

### A. `GENERATE_DRAFT` (AI-Driven)
- **Input**: Context + Template + Optional Scraped Data.
- **Output**: A text draft + suggested media.
- **UI Action**: Show in "Content Factory".

### B. `SCAN_TRENDS` (API/Data-Driven)
- **Input**: Keywords/Hashtags.
- **Output**: List of URLs/IDs of high-interest threads.
- **UI Action**: Populate the "Copilot Queue".

### C. `COMMUNITY_SYNC` (API-Driven)
- **Input**: Discord Channel ID.
- **Output**: Summary of today's member wins/losses.
- **UI Action**: Suggest a "Spotlight" post.

### D. `EMAIL_SEQ` (AI-Driven)
- **Input**: User Segment (e.g., "Inactive 7 days").
- **Output**: 3-part re-engagement sequence.

## 4. Execution State (The "Daily Brief")
This tracks what the user actually sees on their dashboard.

```json
{
  "task_id": "task_999",
  "status": "pending",
  "created_at": "2026-01-25T14:30:00Z",
  "step_data": {
    "thread_url": "https://x.com/user/status/123",
    "suggested_reply": "Actually, most traders fail because...",
    "bridge_type": "deep_link"
  }
}
```

---

## Technical Rationale
- **Decoupling**: By separating the *Definition* (Blueprint) from the *Execution* (Task State), we allow the AI to "re-strategize" without deleting past work.
- **Extensibility**: Adding "Instagram" just means adding a new `INSTAGRAM_STORY_DRAFT` step type to the library.
- **Supabase Integration**: These JSON objects map directly to Postgres JSONB columns, allowing for fast searches and flexible updates.
